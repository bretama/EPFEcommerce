(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-242f2e3c"],{"89b1":function(t,e,i){},e8f4:function(t,e,i){"use strict";i("89b1")},f5e2:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vx-card",{attrs:{title:t.$t("priceDetail")}},[i("vx-card",{staticClass:"mt-10",attrs:{id:"internal-card",title:"","no-shadow":"","card-border":""}},[i("span",{staticStyle:{float:"right"}},[i("vs-button",{attrs:{size:"small",color:"success"},on:{click:function(e){t.insertSellPricePopUp=!0}}},[t._v(t._s(t.$t("setSellPrice")))]),i("vs-button",{staticClass:"ml-2",attrs:{size:"small",color:"success"},on:{click:function(e){t.inventoryTransactionPopUp=!0,t.getInventoryDetail()}}},[t._v(t._s(t.$t("otherTransactions")))])],1),i("vs-table",{staticClass:"stripe",attrs:{"max-items":t.page,data:t.inventoryPriceDetail},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,n){return i("vs-tr",{key:n,attrs:{data:e}},[i("vs-td",{staticClass:"pr-4",attrs:{data:a[n].quantity}},[t._v(t._s(a[n].quantity))]),i("vs-td",{staticClass:"p-0",attrs:{data:a[n].costOfInventory}},[t._v("\n            "+t._s(a[n].costOfInventory.toLocaleString("en-US"))+" ETB")]),i("vs-td",{staticClass:"p-0",attrs:{data:a[n].sellPrice}},[t._v(t._s(a[n].sellPrice.toLocaleString("en-US"))+" ETB\n          ")]),i("vs-td",{staticClass:"p-0",attrs:{data:a[n].discountAmount}},[t._v("\n            "+t._s(a[n].discountAmount.toLocaleString("en-US"))+" ETB")]),i("vs-td",{staticClass:"p-0 w-24",attrs:{data:a[n].id}},[i("span",{attrs:{id:"edit-icon"},on:{click:function(e){return t.updateInventoryCostPrice(a[n].inventoryId,a[n].quantity,a[n].costOfInventory,a[n].sellPrice,a[n].discountAmount)}}},[i("vs-avatar",{attrs:{color:"lightGreen","icon-pack":"feather",icon:"icon-edit"}})],1)])],1)}))}}])},[i("template",{slot:"thead"},[i("vs-th",{staticClass:"pr-4",attrs:{"sort-key":"companyName"}},[t._v(t._s(t.$t("Quantity")))]),i("vs-th",{staticClass:"p-0",attrs:{"sort-key":"licenceNumber"}},[t._v(t._s(t.$t("Cost")))]),i("vs-th",{staticClass:"p-0",attrs:{"sort-key":"tinNumber"}},[t._v(t._s(t.$t("sellPrice")))]),i("vs-th",{staticClass:"p-0",attrs:{"sort-key":"companyStatus"}},[t._v(t._s(t.$t("Discount")))]),i("vs-th",{staticClass:"p-0",attrs:{"sort-key":"companyStatus"}},[t._v(t._s(t.$t("edit")))])],1)],2)],1),i("vs-prompt",{attrs:{classContent:"popup-example",title:"Edit Cost Sell Price","buttons-hidden":"",active:t.inventoryPricePopUp},on:{cancel:function(e){t.quantity="",t.costOfInventory="",t.sellPrice="",t.discountAmount=""},accept:function(e){return t.updateInventoryCostSellPrice()},"update:active":function(e){t.inventoryPricePopUp=e}}},[i("div",[""!=t.validationError?i("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[i("span",[t._v(t._s(t.validationError))])]):t._e(),i("div",{staticClass:"vx-row"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{"data-vv-validate-on":"blur",label:t.$t("quantity"),name:t.quantity},on:{change:t.resetValidationError},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{label:t.$t("cost"),name:t.costOfInventory,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.costOfInventory,callback:function(e){t.costOfInventory=e},expression:"costOfInventory"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{name:t.sellPrice,label:t.$t("sellPrice"),"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.sellPrice,callback:function(e){t.sellPrice=e},expression:"sellPrice"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"vx-col w-1/2 mb-2",attrs:{label:t.$t("discountAmount"),name:t.discountAmount,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.discountAmount,callback:function(e){t.discountAmount=e},expression:"discountAmount"}})],1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),i("div",{staticClass:"flex items-stretch mt-5"},[i("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.updateInventoryCostSellPrice()}}},[t._v("\n        "+t._s(t.$t("Save")))])],1)]),i("vs-prompt",{attrs:{classContent:"popup-example",title:"Insert Sell Price","buttons-hidden":"",active:t.insertSellPricePopUp},on:{cancel:function(e){t.inventorySellPriceDetail.availableQuantity="",t.inventorySellPriceDetail.effectiveDateTime="",t.inventorySellPriceDetail.sellPrice="",t.inventorySellPriceDetail.discountAmount=""},accept:function(e){return t.insertInventorySellPrice()},"update:active":function(e){t.insertSellPricePopUp=e}}},[i("div",[""!=t.validationError?i("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[i("span",[t._v(t._s(t.validationError))])]):t._e(),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-1/2"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"w-full",attrs:{name:t.inventorySellPriceDetail.sellPrice,label:t.$t("sellPrice"),"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.sellPrice,callback:function(e){t.$set(t.inventorySellPriceDetail,"sellPrice",e)},expression:"inventorySellPriceDetail.sellPrice"}})],1),i("div",{staticClass:"vx-col w-1/2"},[i("span",[t._v(t._s(t.$t("effectiveDateTime")))]),i("flat-pickr",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"validate",rawName:"v-validate:effectiveDateTime",value:"required",expression:"'required'",arg:"effectiveDateTime"}],staticClass:"w-full",attrs:{config:t.configdateTimePicker,"data-vv-validate-on":"blur","data-vv-scope":"specimen",name:t.inventorySellPriceDetail.effectiveDateTime},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.effectiveDateTime,callback:function(e){t.$set(t.inventorySellPriceDetail,"effectiveDateTime","string"===typeof e?e.trim():e)},expression:"inventorySellPriceDetail.effectiveDateTime"}})],1)]),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-1/2"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:10",expression:"'required|decimal:10'"}],staticClass:"w-full",attrs:{label:t.$t("discountAmount"),name:t.inventorySellPriceDetail.discountAmoun,"data-vv-validate-on":"blur"},on:{change:t.resetValidationError},model:{value:t.inventorySellPriceDetail.discountAmount,callback:function(e){t.$set(t.inventorySellPriceDetail,"discountAmount",e)},expression:"inventorySellPriceDetail.discountAmount"}})],1)])],1),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),i("div",{staticClass:"flex items-stretch mt-5"},[i("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.insertInventorySellPrice()}}},[t._v("\n        "+t._s(t.$t("Save")))])],1)]),i("vs-prompt",{attrs:{classContent:"popup-example",title:"Add Transaction","buttons-hidden":"",active:t.inventoryTransactionPopUp},on:{cancel:function(e){t.inventoryTransaction.transactionType="",t.inventoryTransaction.quantity="",t.inventoryTransaction.sellPrice="",t.inventoryTransaction.cost=""},accept:function(e){return t.addTransaction()},"update:active":function(e){t.inventoryTransactionPopUp=e}}},[i("div",[""!=t.validationError?i("vs-alert",{attrs:{color:"danger","icon-pack":"feather",icon:"icon-info"}},[i("span",[t._v(t._s(t.validationError))])]):t._e(),i("div",{staticClass:"vx-row"},[i("div",{staticClass:"vx-col w-1/2"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:t.inventoryTransaction.quantity,label:t.$t("quantity"),"data-vv-validate-on":"blur"},on:{change:function(e){return t.validateQuantity()}},model:{value:t.inventoryTransaction.quantity,callback:function(e){t.$set(t.inventoryTransaction,"quantity",e)},expression:"inventoryTransaction.quantity"}}),i("span",{staticClass:"text-danger"},[t._v(t._s(t.quantityValidationError))])],1),i("div",{staticClass:"vx-col w-1/2"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"data-vv-validate-on":"blur",label:t.$t("transactionType"),name:t.inventoryTransaction.transactionType},on:{change:t.resetValidationError},model:{value:t.inventoryTransaction.transactionType,callback:function(e){t.$set(t.inventoryTransaction,"transactionType",e)},expression:"inventoryTransaction.transactionType"}})],1)]),i("div",{staticClass:"vx-row"})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("status")))]),i("div",{staticClass:"flex items-stretch mt-5"},[i("vs-button",{staticClass:"flex-1",attrs:{color:"success",type:"filled"},on:{click:function(e){return e.preventDefault(),t.addTransaction()}}},[t._v(t._s(t.$t("Save"))+"\n      ")])],1)])],1)},n=[],r=i("ade3"),s=(i("41cb"),i("a433"),i("c38f")),o=i.n(s),l=(i("0952"),{components:{flatPickr:o.a},data:function(){return{id:this.$route.params.id,selected:[],inventoryPriceDetail:[],limit:5,page:1,total:0,searchInventory:"",inventoryName:"",inventory:[],inventoryPricePopUp:!1,inventoryId:"",quantity:"",costOfInventory:"",sellPrice:"",discountAmount:"",effectiveDateTime:"",validationError:"",configdateTimePicker:{enableTime:!0,dateFormat:"Y-m-dTH:i"},insertSellPricePopUp:!1,inventoryTransactionPopUp:!1,inventorySellPriceDetail:{sellPrice:"",discountAmount:"",effectiveDateTime:"",availableQuantity:""},inventoryTransaction:{quantity:"",sellPrice:"",cost:"",transactionType:""},inventoryDetail:{},quantityValidationError:""}},methods:Object(r["a"])({validateQuantity:function(){this.inventoryTransaction.quantity>this.inventoryDetail.availableQuantity?this.quantityValidationError="You couldn't enter above available quantity!":this.quantityValidationError=""},updateInventoryCostPrice:function(t,e,i,a,n){this.inventoryId=t,this.inventoryPricePopUp=!0,this.quantity=e,this.costOfInventory=i,this.sellPrice=a,this.discountAmount=n},addTransaction:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){t.isLoading=!0,t.validationError="";var i=[],a={};a["inventoryId"]=t.id,a["transactionType"]=t.inventoryTransaction.transactionType,a["quantity"]=t.inventoryTransaction.quantity,a["costOfInventory"]=t.inventoryTransaction.cost,a["sellPrice"]=t.inventoryTransaction.sellPrice,i.push(a),t.$http.post("/inventorytransaction",i).then((function(e){t.inventoryTransactionPopUp=!1,t.inventoryTransaction.quantity="",t.inventoryTransaction.cost="",t.inventoryTransaction.sellPrice="",t.inventoryTransaction.transactionType="",t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))}else t.validationError="Please enter number on all fields"}))},insertInventorySellPrice:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.isLoading=!0,t.validationError="",t.$http.post("/inventorytransaction/sell-price",{inventoryId:t.id,sellPrice:t.inventorySellPriceDetail.sellPrice,discountAmount:t.inventorySellPriceDetail.discountAmount,effectiveDateTime:new Date(t.inventorySellPriceDetail.effectiveDateTime)}).then((function(e){t.insertSellPricePopUp=!1,t.inventorySellPriceDetail.availableQuantity="",t.inventorySellPriceDetail.effectiveDateTime="",t.inventorySellPriceDetail.sellPrice="",t.inventorySellPriceDetail.discountAmount="",t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))):t.validationError="Please enter number on all fields"}))},updateInventoryCostSellPrice:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.isLoading=!0,t.validationError="",t.$http.post("/inventorytransaction").then((function(e){t.isLoading=!1,t.$vs.notify({title:t.$t("Add"),text:t.$t("Added Successfully!"),iconPack:"feather",icon:"icon-alert-circle",color:"success"})})).catch((function(){t.isLoading=!1}))):t.validationError="Please enter number on all fields"}))},resetValidationError:function(){this.validationError=""},search:function(t){},pageLimit:function(t){this.limit=t,45%this.limit!=0?this.total=Math.ceil(50/this.limit):this.total=45/this.limit},pagination:function(t){this.page=t,this.$http.get("/pricelist/"+this.id,{params:{page:this.page,limit:this.limit}}).then((function(t){this.inventory=t.data}))},getInventoryDetail:function(){var t=this;this.isLoading=!0,this.$http.get("/inventorylistview/"+this.id).then((function(e){t.inventoryTransaction.sellPrice=e.data.sellPrice,t.inventoryDetail=e.data,t.isLoading=!1})).catch((function(e){t.isLoading=!1}))}},"getInventoryDetail",(function(){var t=this;this.$http.get("/pricelist/"+this.id,{params:{page:1,limit:t.limit}}).then((function(e){t.inventoryPriceDetail=e.data})),t.total=50/t.limit,this.$http.get("/inventory/"+t.id).then((function(e){t.inventoryName=e.data.inventoryGenericName}))})),created:function(){this.getInventoryDetail()},computed:{getInventoryItem:function(){return this.$store.getters["inventory/getInventoryItemPriceDetail"](this.id)}}}),c=l,v=(i("e8f4"),i("2877")),d=Object(v["a"])(c,a,n,!1,null,"0b13785d",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-242f2e3c.69a66c21.js.map