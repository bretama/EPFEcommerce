(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2536"],{2442:function(s,i,e){"use strict";e.r(i);var t=function(){var s=this,i=s.$createElement,e=s._self._c||i;return e("vx-card",{attrs:{title:s.$t("allPrivileges")+" | "+s.getRole.roleName}},[e("vx-card",{attrs:{id:"internal-card",title:"","no-shadow":"","card-border":""}},[e("vs-table",{staticClass:"stripe",attrs:{hoverFlat:"","max-items":s.perPage,data:s.permissions},scopedSlots:s._u([{key:"default",fn:function(i){var t=i.data;return s._l(t,(function(i,r){return e("vs-tr",{key:r,attrs:{data:i}},[e("vs-td",{staticClass:"w-10"},[s._v(s._s(r+1+s.limit*(s.currentPage-1)))]),e("vs-td",{staticClass:"pr-4 w-1/4",attrs:{data:t[r].privilegeDescription}},[s._v(s._s(t[r].privilegeDescription))]),e("vs-td",{staticClass:"pr-4 w-1/4",attrs:{data:t[r].privilegeUrl}},[s._v(s._s(t[r].privilegeUrl))]),e("vs-td",{staticClass:"pr-4 w-1/4",attrs:{data:t[r].method}},[s._v(s._s(t[r].method))]),e("vs-td",{staticClass:"p-0",attrs:{data:t[r].id}},[e("ul",{staticClass:"switch-container"},[e("li",[s.isGranted("setRolePermission")?e("span",[e("vs-switch",{attrs:{color:"success"},on:{click:function(i){return s.pushOrRemovePermissionId(t[r].permissionStatus,t[r].privilegeId)}},model:{value:t[r].permissionStatus,callback:function(i){s.$set(t[r],"permissionStatus",i)},expression:"data[indextr].permissionStatus"}})],1):s._e()])])])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",{attrs:{"sort-key":"number"}},[s._v("#")]),e("vs-th",{attrs:{"sort-key":"privilegeName"}},[s._v(s._s(s.$t("privilegeName")))]),e("vs-th",{attrs:{"sort-key":"privilegeUrl"}},[s._v(s._s(s.$t("privilegeUrl")))]),e("vs-th",{attrs:{"sort-key":"method"}},[s._v(s._s(s.$t("method")))]),s.isGranted("setRolePermission")?e("vs-th",{attrs:{"sort-key":"actions"}},[s._v(s._s(s.$t("allowAll"))+"\n          "),e("ul",{staticClass:"switch-container",staticStyle:{"margin-left":"15px"}},[e("li",[s.isGranted("setRolePermission")?e("span",[e("vs-switch",{attrs:{color:"success"},on:{click:function(i){return s.allowAllPermissions()}},model:{value:s.assignAllPermissions,callback:function(i){s.assignAllPermissions=i},expression:"assignAllPermissions"}})],1):s._e()])])]):s._e()],1)],2)],1),e("vs-pagination",{staticClass:"m-4",attrs:{total:s.totalPage},on:{change:s.getRoles},model:{value:s.currentPage,callback:function(i){s.currentPage=i},expression:"currentPage"}})],1)},r=[],n={components:{},data:function(){return{permissionStatuses:[],assignedPermissionIds:[],roleId:this.$route.params.roleId,assignAllPermissions:!1,permissions:[],limit:15,total:0,currentPage:1,perPage:20}},methods:{fetchAllPrivileges:function(){var s=this,i={limit:this.perPage,page:this.currentPage};this.$store.dispatch("PrivilegeModule/fetchPrivileges",i).then((function(){s.isLoading=!1,s.fetchAssignedPermissions(),s.populatePermission()}))},fetchAssignedPermissions:function(){var s=this;this.$store.dispatch("ManageRolePermissionsModule/fetchAssignedPermissions",this.roleId).then((function(i){s.totalPage=1,s.isLoading=!1,s.populateAssignedPermissionIds(),s.populatePermission()})).catch((function(i){s.isLoading=!1}))},populatePermission:function(){var s=this;this.permissions=this.getPrivileges;for(var i=[],e={},t=function(t){e={privilegeId:s.permissions[t].privilegeId,privilegeName:s.permissions[t].privilegeName,privilegeDescription:s.permissions[t].privilegeDescription,privilegeUrl:s.permissions[t].privilegeUrl,method:s.permissions[t].method,createdBy:s.permissions[t].createdBy,privileged:s.permissions[t].privileged,totalPage:s.permissions[t].totalPage,permissionStatus:s.getAssignedPermissions.filter((function(i){return i.privilegeId==s.permissions[t].privilegeId})).length>0&&void 0!=s.getAssignedPermissions},i.push(e)},r=0;r<this.permissions.length;r++)t(r);this.permissions=i,0==this.permissions.filter((function(s){return 0==s.permissionStatus})).length&&(this.assignAllPermissions=!0)},pushOrRemovePermissionId:function(s,i){this.assignAllPermissions=!1;s?this.assignedPermissionIds=this.assignedPermissionIds.filter((function(s){return s!=i})):this.assignedPermissionIds.push(i),this.assignPermission()},assignPermission:function(){var s=this,i={roleId:this.roleId,privilegeIds:this.assignedPermissionIds,isPrivileged:!1,createdBy:localStorage.getItem("userId")};this.$store.dispatch("ManageRolePermissionsModule/assignPermission",i).then((function(s){})).catch((function(i){s.isLoading=!1}))},allowAllPermissions:function(){this.assignedPermissionIds=[];for(var s=0;s<this.permissions.length;s++)this.assignAllPermissions?(this.assignedPermissionIds=[],this.permissions[s].permissionStatus=!1):(this.assignedPermissionIds.push(this.permissions[s].privilegeId),this.permissions[s].permissionStatus=!0);this.assignPermission()},populateAssignedPermissionIds:function(){for(var s=0;s<this.getAssignedPermissions.length;s++)this.assignedPermissionIds.push(this.getAssignedPermissions[s].privilegeId)},fetchRole:function(){this.$store.dispatch("RoleModule/fetchRole",this.roleId).then((function(){}))}},created:function(){this.fetchAllPrivileges(),this.fetchRole()},computed:{getPrivileges:function(){return this.$store.getters["PrivilegeModule/getPrivileges"]},getPrivilege:function(){return this.$store.getters["PrivilegeModule/getPrivilege"]},getAssignedPermissions:function(){return this.$store.getters["ManageRolePermissionsModule/getAssignedPermissions"]},getRole:function(){return this.$store.getters["RoleModule/getRole"]}}},o=n,a=e("2877"),l=Object(a["a"])(o,t,r,!1,null,"78eeaa3a",null);i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0b2536.dac3d3c2.js.map