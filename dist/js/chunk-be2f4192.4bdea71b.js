(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be2f4192"],{"57eb":function(e,t,s){e.exports=s.p+"img/CnDoEPXVInjLaSTWgvVYaYOrd0UJGz.ee90acc8.png"},"6dcf":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"invoice-page"}},[r("vx-card",[r("vx-card",{attrs:{id:"internal-card",title:"","no-shadow":"","card-border":""}},[r("div",{staticClass:"vx-row leading-loose"},[r("div",{staticClass:"vx-col w-full md:w-1/4"},[e.userDetails.profilePicture?r("vs-avatar",{attrs:{size:"150px",src:e.$domain+"/profiles/"+e.userDetails.profilePicture}}):e._e(),e.userDetails.profilePicture?e._e():r("vs-avatar",{attrs:{size:"150px",src:s("57eb")}})],1),r("div",{staticClass:"vx-col w-full md:w-1/4 text-left"},[r("div",{staticClass:"invoice__invoice-detail"},[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("userName")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"UserIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.fullName))])],1),r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("companyName")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"BriefcaseIcon",svgClasses:"h-4 w-4"}}),e.order.companyName?r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.companyName||"ordered by admin"))]):e._e(),0==e.order.companyId?r("span",{staticClass:"ml-2"},[e._v(e._s("Ordered by Admin"))]):e._e()],1)])]),r("div",{staticClass:"vx-col w-full md:w-1/4 text-left"},[r("div",{staticClass:"invoice__invoice-detail"},[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("orderNumber")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"HashIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.orderNumber))])],1),r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("Payment"))+" "+e._s(e.$t("Option")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"CreditCardIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.paymentOption))])],1)])]),r("div",{staticClass:"vx-col w-full md:w-1/4 text-left"},[r("div",{staticClass:"invoice__invoice-detail"},[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("orderDate")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"ClockIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e._f("date2")(e.order.orderDateTime)))])],1),null!=e.order.siteName?r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("pickupTime")))]):r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("deliveryTime")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"WatchIcon",svgClasses:"h-4 w-4"}}),e.order.deliveryDateTime?r("span",{staticClass:"ml-2"},[e._v(e._s(e._f("date2")(e.order.deliveryDateTime)))]):r("span",{staticClass:"ml-2"},[e._v("Not Specified")])],1),null!=e.order.siteName?r("span",[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("pickupLocation")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"MapPinIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.siteName))])],1)]):r("span",[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("deliveryLocation")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"MapPinIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.deliveryAddress))])],1)])])]),null!=e.order.preOrderInfo&&e.order.preOrderInfo!=[]&&""!=e.order.preOrderInfo?r("div",{staticClass:"bg-white border-top",staticStyle:{"border-style":"ridge","margin-left":"500px",width:"1100px"}},[r("h3",[e._v(" "+e._s(e.$t("preOrderInformation")))]),r("div",{staticClass:"vx-row leading-loose p-2"},[r("div",{staticClass:"vx-col w-full md:w-1/2 text-left"},[r("div",{staticClass:"invoice__invoice-detail"},[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("preOrderStatus")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"ClockIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.preOrderStatus))])],1),r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("preOrderPaymentStatus")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"ClockIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(e.order.preOrderpaymentStatus))])],1)])]),e._l(e.order.preOrderInfo,(function(t,s){return r("div",{key:s,staticClass:"vx-col w-full md:w-1/2 text-left"},[r("div",{staticClass:"invoice__invoice-detail"},[r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("orderQuantity")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"ClockIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(t.orderQuantity))])],1),r("h6",{staticClass:"mt-4"},[e._v(e._s(e.$t("unitPrice")))]),r("p",{staticClass:"flex items-center"},[r("feather-icon",{attrs:{icon:"WatchIcon",svgClasses:"h-4 w-4"}}),r("span",{staticClass:"ml-2"},[e._v(e._s(t.unitPrice.toLocaleString("en-US")))])],1)])])}))],2)]):e._e(),r("vs-divider"),r("loading",{attrs:{active:e.isLoading,"can-cancel":!0,"is-full-page":e.fullPage},on:{"update:active":function(t){e.isLoading=t}}}),r("div",{staticClass:"vx-col w-full md:w-full"},[r("div",[r("vs-table",{attrs:{"max-items":"3",stripe:"",data:e.order.orderItems},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.data;return e._l(s,(function(t,a){return r("vs-tr",{key:a},[r("vs-td",{staticClass:"py-0 text-left",attrs:{data:a}},[e._v(e._s(a+1))]),r("vs-td",{attrs:{data:s[a]&&s[a].inventoryGenericName}},[e._v(e._s(s[a]&&s[a].inventoryGenericName)+" "+e._s(s[a]&&null!=s[a].dosageForm?s[a].dosageForm:"")+" "+e._s(s[a]&&null!=s[a].strength?s[a].strength:""))]),r("vs-td",{attrs:{data:s[a].orderQuantity}},[e._v("x"+e._s(s[a].orderQuantity))]),r("vs-td",{attrs:{data:s[a].orderQuantity}},[e._v("x"+e._s(s[a].preOrderQuantity))]),r("vs-td",{attrs:{data:s[a].unitPrice}},[e._v(e._s(s[a].unitPrice.toLocaleString("en-US")))]),r("vs-td",{staticClass:"pl-10",attrs:{data:s[a].unitPrice}},[e._v(e._s((s[a].unitPrice*s[a].orderQuantity+s[a].unitPrice*s[a].preOrderQuantity).toLocaleString("en-US"))+" ETB")])],1)}))}}])},[r("template",{slot:"header"},[r("div",{staticClass:"vx-row w-full"},[r("div",{staticClass:"vx-col w-1/2"},[r("h4",{staticClass:"p-1 mb-2 rounded-lg bg-grey-light"},[e._v(e._s(e.$t("orderedItems")))])])])]),r("template",{slot:"thead"},[r("vs-th",[e._v("#")]),r("vs-th",[e._v(e._s(e.$t("genericName")))]),r("vs-th",[e._v(e._s(e.$t("orderQuantity")))]),r("vs-th",[e._v(e._s(e.$t("preOrderQuantity")))]),r("vs-th",[e._v(e._s(e.$t("unitPrice")))]),r("vs-th",[e._v(e._s(e.$t("subTotal")))])],1)],2),r("div",{staticClass:"vx-row"},[r("div",{staticClass:"vx-col w-1/2"}),r("div",{staticClass:"vx-col w-1/2"},[r("vs-table",{staticClass:"w-full ml-auto mt-4",attrs:{stripe:"",data:e.order}},[r("vs-tr",[r("vs-th",{staticClass:"ml-12"},[e._v(e._s(e.$t("TOTAL")))]),r("vs-td",[e._v(e._s((e.order.totalPrice/1.05).toLocaleString("en-US"))+" ETB")])],1),r("vs-tr",[r("vs-th",[e._v(e._s(e.$t("TAX"))+"(5%)")]),r("vs-td",[e._v(e._s((e.order.totalPrice/1.05*.05).toLocaleString("en-US"))+" ETB")])],1),r("vs-tr",[r("th",[e._v(e._s(e.$t("grandTotal")))]),r("td",{staticClass:"text-black font-bold"},[e._v(e._s(e.order.totalPrice.toLocaleString("en-US"))+" "+e._s(e.$t("ETB")))])]),r("vs-divider"),"PartialPaid"==e.order.paymentOption?r("vs-tr",[r("th",[e._v(e._s(e.$t("amountToBePaid")))]),r("td",{staticClass:"text-black font-bold"},[e._v(e._s(e.order.amountToBePaid.toLocaleString("en-US"))+" "+e._s(e.$t("ETB"))+"\n                    ")])]):e._e(),"PartialPaid"==e.order.paymentOption?r("vs-tr",[r("th",[e._v(e._s(e.$t("creditAmount")))]),r("td",{staticClass:"text-black font-bold"},[e._v(e._s(e.order.creditAmount.toLocaleString("en-US"))+" "+e._s(e.$t("ETB"))+"\n                    ")])]):e._e()],1)],1),r("OrderVerification",{attrs:{orderId:e.id,orderDocuments:e.order,totalPaidAmount:e.totalPaidAmount}})],1)],1)])],1),r("vs-prompt",{attrs:{acceptText:e.$t("Save"),cancelText:e.$t("Cancel"),classContent:"popup-example",title:"Payment Details",active:e.popUpActive},on:{accept:function(t){return e.save()},"update:active":function(t){e.popUpActive=t}}},[r("h5",[e._v("Payment Option")]),r("loading",{attrs:{active:e.isLoadingPayment,"can-cancel":!0,"is-full-page":e.fullPage},on:{"update:active":function(t){e.isLoadingPayment=t}}}),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.typeOfPayment,name:"paymentType"},model:{value:e.selectedPaymentType,callback:function(t){e.selectedPaymentType=t},expression:"selectedPaymentType"}}),null==e.order.siteName?r("div",[r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("paymentType"),expression:"errors.has('paymentType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("paymentType")))]),r("h5",[e._v("Order Status")]),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.typeOfOrderStatuses,name:"statusType"},model:{value:e.selectedOrderStatus,callback:function(t){e.selectedOrderStatus=t},expression:"selectedOrderStatus"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("statusType"),expression:"errors.has('statusType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("statusType")))])],1):r("div",[r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("paymentType"),expression:"errors.has('paymentType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("paymentType")))]),r("h5",[e._v("Order Status")]),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.pickUpOrderStatuses,name:"statusType"},model:{value:e.selectedOrderStatus,callback:function(t){e.selectedOrderStatus=t},expression:"selectedOrderStatus"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("statusType"),expression:"errors.has('statusType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("statusType")))])],1)],1),e.preOrderPopUpActive?r("vs-prompt",{attrs:{acceptText:e.$t("Save"),cancelText:e.$t("Cancel"),classContent:"popup-example",title:"Payment Details",active:e.preOrderPopUpActive},on:{accept:function(t){return e.save()},"update:active":function(t){e.preOrderPopUpActive=t}}},[r("h5",[e._v("Payment Option")]),r("loading",{attrs:{active:e.isLoadingPayment,"can-cancel":!0,"is-full-page":e.fullPage},on:{"update:active":function(t){e.isLoadingPayment=t}}}),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.typeOfPayment,name:"paymentType"},model:{value:e.selectedPaymentTypePreOrder,callback:function(t){e.selectedPaymentTypePreOrder=t},expression:"selectedPaymentTypePreOrder"}}),null==e.order.siteName?r("div",[r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("paymentType"),expression:"errors.has('paymentType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("paymentType")))]),r("h5",[e._v("Order Status")]),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.typeOfOrderStatuses,name:"statusType"},model:{value:e.selectedOrderStatusPreOrder,callback:function(t){e.selectedOrderStatusPreOrder=t},expression:"selectedOrderStatusPreOrder"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("statusType"),expression:"errors.has('statusType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("statusType")))])],1):r("div",[r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("paymentType"),expression:"errors.has('paymentType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("paymentType")))]),r("h5",[e._v("Order Status")]),r("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"m-1 vs-select-no-border d-theme-input-dark-bg w-full",attrs:{options:e.pickUpOrderStatuses,name:"statusType"},model:{value:e.selectedOrderStatusPreOrder,callback:function(t){e.selectedOrderStatusPreOrder=t},expression:"selectedOrderStatusPreOrder"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("statusType"),expression:"errors.has('statusType')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("statusType")))])],1)],1):e._e(),e.showConfirmOrderPopup?r("vs-prompt",{attrs:{acceptText:e.$t("confirm"),cancelText:e.$t("cancel"),classContent:"popup-example",title:e.$t("confirmOrderPayment"),active:e.showConfirmOrderPopup},on:{accept:function(t){return e.confirmOrderPayment()},"update:active":function(t){e.showConfirmOrderPopup=t}}},[r("h5",[e._v(e._s(e.$t("confirmOrderPayment")))])]):e._e(),e.showRejectOrderPopup?r("vs-prompt",{attrs:{acceptText:e.$t("reject"),cancelText:e.$t("cancel"),classContent:"popup-example",title:e.$t("rejectOrderPayment"),active:e.showRejectOrderPopup},on:{accept:function(t){return e.rejectOrderPayment()},"update:active":function(t){e.showRejectOrderPopup=t}}},[r("h5",[e._v(e._s(e.$t("rejectOrderReaseon")))]),r("vs-textarea",{model:{value:e.orderRejectionReason,callback:function(t){e.orderRejectionReason=t},expression:"orderRejectionReason"}}),e.orderRejectionReasonError?r("span",{staticClass:"text-danger"},[e._v(e._s(e.orderRejectionReasonError))]):e._e()],1):e._e()],1)],1)],1)},a=[],i=s("4a7a"),n=s.n(i),o=(s("7bb1"),s("ecee"),s("9062")),c=s.n(o),d=(s("e40d"),s("5d7c")),l={data:function(){return{id:this.$route.params.id,order:{secondInventory:[]},secondInventoryBackup:[],typeOfOrderStatuses:["Ready For Shipment","In-Transit","Delivered"],pickUpOrderStatuses:["Ready For Pickup"],typeOfPayment:["Paid","PostPaid","PartialPaid"],selectedPaymentType:"",selectedOrderStatus:"",companyDetails:{companyId:"",accountId:"",companyName:"",licenceNumber:"",companyStatus:"",registrationDate:""},userDetails:{firstName:"",lastName:"",gfatherName:"",email:"",mobilePhone:"",userType:"",companyId:""},popUpActive:!1,preOrderPopUpActive:!1,oldPassword:"",newPassword:"",confirmationPassword:"",changePassword:!1,isLoading:!1,isLoadingPayment:!1,fullPage:!1,selectedPaymentTypePreOrder:"",selectedOrderStatusPreOrder:"",showConfirmOrderPopup:!1,showRejectOrderPopup:!1,orderRejectionReason:"",orderRejectionReasonError:"",totalPaidAmount:0}},computed:{userIsFinance:function(){var e=localStorage.getItem("userType");return"Finance"===e}},created:function(){this.getOrderById()},methods:{sendNewNotification:function(e,t){var s=this,r={senderId:localStorage.getItem("userId"),receiverId:this.order.userId,detailLink:"/pages/order/"+this.order.orderId,message:e};this.$http.post("/user-notifications/add-user-notification",r).then((function(e){s.$vs.notify({title:s.$t("Notification"),text:t,position:"bottom-right",duration:7e3,color:"success"})})).catch((function(e){s.$vs.notify({title:s.$t("error"),text:s.$t("somethingWentWrong"),position:"bottom-right",duration:7e3,color:"danger"})}))},rejectOrderPayment:function(){var e=this;if(void 0===this.orderRejectionReason||""===this.orderRejectionReason)return this.orderRejectionReasonError="Please enter rejection reason",void(this.showRejectOrderPopup=!0);this.$http.get("/order/reject-order-payment-status/".concat(this.order.orderId)).then((function(t){e.sendNewNotification(e.orderRejectionReason,e.$t("orderRejectedAndNotificationSent")),e.getOrderById()})).catch((function(t){e.$vs.notify({title:e.$t("error"),text:e.$t("somethingWentWrong"),position:"bottom-right",duration:7e3,color:"danger"})}))},confirmOrderPayment:function(){var e=this;this.$http.get("/order/verify-order-payment-status/".concat(this.order.orderId)).then((function(t){e.sendNewNotification("Your payment for order has been verified!",e.$t("orderVerifiedAndNotificationSent")),e.getOrderById()})).catch((function(t){e.$vs.notify({title:e.$t("error"),text:e.$t("somethingWentWrong"),position:"bottom-right",duration:7e3,color:"danger"})}))},getOrderById:function(){var e=this;this.isLoading=!0,this.$http.get("/order/".concat(this.id)).then((function(t){e.order=t.data;for(var s=0;e.order.orderPaymentResponseModels.length;s++)e.totalPaidAmount=e.totalPaidAmount+e.order.orderPaymentResponseModels[s].paidAmount;e.getCompanyDetail(),e.getUserDetail();for(var r=0;r<e.order.orderItems.length;r++)e.getInventoryById(e.order.orderItems[r].inventoryId,r);e.isLoading=!1})).catch((function(t){e.isLoading=!1}))},getInventoryById:function(e,t){var s=this;this.$http.get("/inventory/".concat(e)).then((function(e){s.secondInventoryBackup.push(e.data),s.order.secondInventory=s.secondInventoryBackup})).catch((function(e){s.isLoading=!1}))},openStatusChangeConfirm:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm",text:"Are you sure you want to cancel this order?",accept:this.cancleOrder,acceptText:this.$t("Yes"),cancelText:this.$t("No")})},cancleOrder:function(){var e=this;this.$http.put("/order/changeorderstatus/".concat(this.id),{orderStatus:"Canceled",preOrderStatus:"Canceled"}).then((function(t){e.$vs.notify({title:"Notification",text:"Order successfully canceled",color:"primary",iconPack:"feather",icon:"icon-check",position:"top-right"}),e.$router.push({path:"/pages/order/viewOrders"})}))},save:function(){var e=this;this.$validator.validateAll().then((function(t){t?(e.isLoadingPayment=!0,e.$http.post("/order/sell",{orderNumber:e.order.orderNumber,orderStatus:e.selectedOrderStatus,paymentStatus:e.selectedPaymentType,preOrderStatus:e.selectedOrderStatusPreOrder,preOrderPaymentStatus:e.selectedPaymentTypePreOrder}).then((function(t){e.selectedOrderStatus="",e.selectedPaymentType="",e.selectedPaymentTypePreOrder="",e.selectedOrderStatusPreOrder="",e.isLoadingPayment=!1,e.$vs.notify({title:"Payment Stauts",text:"Payment successfully.",color:"success",iconPack:"feather",icon:"icon-check"}),e.popUpActive=!1,e.preOrderPopUpActive=!1,e.$router.push("/pages/order/viewOrders")})).catch((function(t){e.isLoadingPayment=!1}))):e.$vs.notify({title:"Error",text:"Please enter valid details",color:"warning",iconPack:"feather",icon:"icon-alert-circle",position:"top-right"})}))},getUserDetail:function(){var e=this;this.$http.get("/accounts/".concat(this.order.userId)).then((function(t){e.userDetails=t.data})).catch((function(t){e.isLoading=!1}))},getCompanyDetail:function(){var e=this;this.$http.get("/company/".concat(this.order.companyId)).then((function(t){e.companyDetails=t.data})).catch((function(t){e.isLoading=!1}))}},components:{"v-select":n.a,Loading:c.a,OrderVerification:d["a"]}},p=l,v=s("2877"),u=Object(v["a"])(p,r,a,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-be2f4192.4bdea71b.js.map